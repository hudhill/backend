enum Permission {
  IT
  ADMIN
  SCIENTIST
  MENTOR
  TEACHER
  STUDENT
  PARTICIPANT
}

type Profile {
  id: ID! @id
  username: String! @unique
  permissions: [Permission] @scalarList(strategy: RELATION)
  authEmail: [AuthEmail]!
  authToken: [AuthToken]!
  authInvite: [AuthInvite]! @relation(name:"Owner")
  authParticipant: [AuthParticipant]!
  results: [Result]!
  teacherIn: [Class]! @relation(name:"Classcreator")
  studentIn: [Class]! @relation(name:"Studentofclass")
  participantIn: [Study]! @relation(name:"Participantofstudy")
  researcherIn: [Study]! @relation(name:"Creatorofstudy")
  taskCreatorIn: [Task]! @relation(name:"Creatoroftask")
  collaboratorInStudy: [Study]! @relation(name:"Studycollaborator")
  collaboratorInTask: [Task]! @relation(name:"Taskcollaborator")
  image: String
  largeImage: String
  info: Json
}

type AuthEmail {
  id: ID! @id
  email: String @unique
  password: String!
  resetToken: String
  resetTokenExpiry: String
  profile: Profile!
  settings: Json
}

type AuthParticipant {
  id: ID! @id
  email: String @unique
  password: String!
  resetToken: String
  resetTokenExpiry: String
  profile: Profile!
  settings: Json
}

type AuthToken {
  id: ID! @id
  token: String! @unique
  tokenExpiry: String
  profile: Profile!
  email: String @unique
}

type AuthInvite {
  id: ID! @id
  profile: Profile! @relation(name:"Owner")
  invitedIn: Class! @relation(name:"Invite")
}

type School {
  id: ID! @id
  title: String!
  description: String
  image: String
  largeImage: String
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  creator: Profile!
}

type Class {
  id: ID! @id
  code: String! @unique
  title: String!
  description: String
  image: String
  largeImage: String
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  creator: Profile! @relation(name:"Classcreator")
  students: [Profile]! @relation(name:"Studentofclass")
  invites: [AuthInvite]! @relation(name:"Invite")
}

type Experiment {
  id: ID! @id
  title: String!
  shortDescription: String
  description: String
  image: String
  largeImage: String
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  author: Profile!
  parameters: Json
  customExperiments: [Parameter]!
  script: String
  style: String
}

type Result {
  id: ID! @id
  template: Template #relationship to Template
  task: Task!
  user: Profile! #relationship to Profile
  quantity: Int!
  data: Json
  dataPolicy: String
  token: String @unique
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  payload: String
  study: Study #relationship to Study
}

type Parameter {
  id: ID! @id
  title: String!
  experiment: Experiment!
  author: Profile!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  data: Json
  settings: Json
}

type Study {
  id: ID! @id
  title: String!
  slug: String! @unique
  shortDescription: String
  description: String
  author: Profile! @relation(name:"Creatorofstudy")
  tasks: [Task]!
  settings: Json
  participants: [Profile]! @relation(name:"Participantofstudy")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  image: String
  largeImage: String
  info: Json
  collaborators: [Profile]! @relation(name:"Studycollaborator")
}

type Task {
  id: ID! @id
  title: String!
  slug: String! @unique
  description: String
  template: Template
  author: Profile! @relation(name:"Creatoroftask")
  parameters: Json
  settings: Json
  link: String
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  collaborators: [Profile]! @relation(name:"Taskcollaborator")
}

type Template {
  id: ID! @id
  title: String!
  slug: String! @unique
  shortDescription: String
  description: String
  image: String
  largeImage: String
  author: Profile!
  parameters: Json
  script: String
  style: String
  tasks: [Task]!
  settings: Json
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}
